{"version":3,"sources":["index.js"],"names":["document","addEventListener","editInputChangeListener","event","log","target","value","parseInt","data_key","parent","parentNode","removeChild","innerHTML","pendingClick","todos","app","getElementById","todoList","createElement","input","setAttribute","placeholder","onchange","inputChangeListener","newTodo","push","updateTodoList","todo","todoItem","checkbox","type","id","length","label","htmlFor","onclick","xorClick","e","detail","setTimeout","key","editInput","onblur","appendChild","focus","todoEdit"],"mappings":";AAAAA,SAASC,iBAAiB,mBAAoB,WASnCC,SAAAA,EAAwBC,GAE3BA,GADIC,QAAAA,IAAI,aAAcD,EAAME,OAAOC,OACnCH,EAAME,OAAOC,MAAO,CAClBA,IAAAA,EAAQH,EAAME,OAAOC,MACnBC,EAAAA,SAASJ,EAAME,OAAOG,WAAWL,EAAME,OAAOC,MAChDG,IAAAA,EAASN,EAAME,OAAOK,WACnBC,EAAAA,YAAYR,EAAME,QAClBO,EAAAA,UAAYN,GAwDnBO,IAAAA,EAAe,EACfC,EAAQ,GACRC,EAAMf,SAASgB,eAAe,OAC9BC,EAAWjB,SAASkB,cAAc,MAClCC,EAAQnB,SAASkB,cAAc,SAC7BE,EAAAA,aAAa,OAAQ,QACrBC,EAAAA,YAAc,kBACdC,EAAAA,SA9EGC,SAAoBpB,GACvBA,GAAAA,EAAME,OAAOC,MAAO,CAClBkB,IAAAA,EAAUrB,EAAME,OAAOC,MACrBmB,EAAAA,KAAKD,GA0BNE,SAAeC,EAAMjB,GACxBiB,GAAAA,EAAM,CACJC,IAAAA,EAAW5B,SAASkB,cAAc,MAClCW,EAAW7B,SAASkB,cAAc,SAC7BY,EAAAA,KAAO,WACPC,EAAAA,GAAKJ,EAAO,OAASb,EAAMkB,OAChCC,IAAAA,EAAQjC,SAASkB,cAAc,SAC7BgB,EAAAA,QAAUP,EAAO,OAASb,EAAMkB,OAC7BG,EAAAA,QAAU,SAAK,IAanBC,SAASC,EAAGV,EAAMM,GAOjBI,OALJxB,IACWA,aAAAA,GACE,EAAA,GAGTwB,EAAEC,QACH,KAAA,EACYC,EAAAA,WAAW,aAEvB,KACH,MACG,KAAA,EA7CSjC,EA+CHqB,EA/CUa,EA+CJ1B,EAAMkB,OAAS,EA/CNtB,EA+CSuB,GA9CjCQ,EAAYzC,SAASkB,cAAc,UAC7BY,KAAO,OACPxB,EAAAA,MAAQA,EACRE,EAAAA,SAAWgC,EACXE,EAAAA,OAASxC,EACToB,EAAAA,SAAWpB,EACVU,EAAAA,UAAY,GACZ+B,EAAAA,YAAYF,GACbG,EAAAA,QATHC,IAASvC,EAAOkC,EAAK9B,EACxB+B,EAmBSJ,CAAAA,EAAGV,EAAMM,IAEdrB,EAAAA,UAAYe,EACTgB,EAAAA,YAAYd,GACZc,EAAAA,YAAYV,GACVU,EAAAA,YAAYf,IAvCRJ,CAAAA,EAASP,GAClBX,EAAAA,MAAQ,KA0EdqC,EAAAA,YAAYxB,GACZwB,EAAAA,YAAY1B","file":"parcel-demo.96dc185f.map","sourceRoot":"..","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  function inputChangeListener(event) {\n    if (event.target.value) {\n      let newTodo = event.target.value;\n      todos.push(newTodo);\n      updateTodoList(newTodo, todoList);\n      input.value = \"\";\n    }\n  }\n  function editInputChangeListener(event) {\n    console.log(\"edit input\", event.target.value);\n    if (event.target.value) {\n      let value = event.target.value;\n      todos[parseInt(event.target.data_key)]=event.target.value;\n      let parent = event.target.parentNode;\n      parent.removeChild(event.target);\n      parent.innerHTML = value;\n    }\n  }\n  function todoEdit(value, key, parentNode) {\n    let editInput = document.createElement(\"input\");\n    editInput.type = \"text\";\n    editInput.value = value;\n    editInput.data_key = key;\n    editInput.onblur = editInputChangeListener;\n    editInput.onchange = editInputChangeListener;\n    parentNode.innerHTML = \"\";\n    parentNode.appendChild(editInput);\n    editInput.focus();\n  }\n  function updateTodoList(todo, parentNode) {\n    if (todo) {\n      let todoItem = document.createElement(\"li\");\n      let checkbox = document.createElement(\"input\");\n      checkbox.type = \"checkbox\";\n      checkbox.id = todo + \"_id_\" + todos.length;\n      let label = document.createElement(\"label\");\n      label.htmlFor = todo + \"_id_\" + todos.length;\n      todoItem.onclick = e => {\n        xorClick(e, todo, label);\n      };\n      label.innerHTML = todo;\n      todoItem.appendChild(checkbox);\n      todoItem.appendChild(label);\n      parentNode.appendChild(todoItem);\n    }\n  }\n  /**\n   * To handle click and double click confusions\n   * Reference : https://stackoverflow.com/a/11057483\n   */\n  function xorClick(e, todo, label) {\n    // kill any pending single clicks\n    if (pendingClick) {\n      clearTimeout(pendingClick);\n      pendingClick = 0;\n    }\n\n    switch (e.detail) {\n      case 1:\n        pendingClick = setTimeout(function() {\n          //console.log(\"single click action here\");\n        }, 500); // should match OS multi-click speed\n        break;\n      case 2:\n        //console.log(\"double click action here\");\n        todoEdit(todo, todos.length - 1, label);\n        break;\n      default:\n        break;\n    }\n  }\n  let pendingClick = 0;\n  let todos = [];\n  let app = document.getElementById(\"app\");\n  let todoList = document.createElement(\"ul\");\n  let input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"text\");\n  input.placeholder = \"Enter a todo...\";\n  input.onchange = inputChangeListener;\n  app.appendChild(input);\n  app.appendChild(todoList);\n});\n"]}