{"version":3,"sources":["index.js"],"names":["document","addEventListener","inputChangeListener","event","target","value","newTodo","todos","push","updateTodoList","todoList","input","editInputChangeListener","parseInt","data_key","parent","parentNode","removeChild","innerHTML","todoEdit","key","editInput","createElement","type","onblur","onchange","appendChild","focus","todo","todoItem","checkbox","id","length","label","htmlFor","onclick","xorClick","e","pendingClick","clearTimeout","detail","setTimeout","app","getElementById","setAttribute","placeholder"],"mappings":"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","file":"parcel-demo.f4d68b9a.map","sourceRoot":"..","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  function inputChangeListener(event) {\n    if (event.target.value) {\n      let newTodo = event.target.value;\n      todos.push(newTodo);\n      updateTodoList(newTodo, todoList);\n      input.value = \"\";\n    }\n  }\n  function editInputChangeListener(event) {\n    //console.log(\"edit input\", event.target.value);\n    if (event.target.value) {\n      let value = event.target.value;\n      todos[parseInt(event.target.data_key)]=event.target.value;\n      let parent = event.target.parentNode;\n      parent.removeChild(event.target);\n      parent.innerHTML = value;\n    }\n  }\n  function todoEdit(value, key, parentNode) {\n    let editInput = document.createElement(\"input\");\n    editInput.type = \"text\";\n    editInput.value = value;\n    editInput.data_key = key;\n    editInput.onblur = editInputChangeListener;\n    editInput.onchange = editInputChangeListener;\n    parentNode.innerHTML = \"\";\n    parentNode.appendChild(editInput);\n    editInput.focus();\n  }\n  function updateTodoList(todo, parentNode) {\n    if (todo) {\n      let todoItem = document.createElement(\"li\");\n      let checkbox = document.createElement(\"input\");\n      checkbox.type = \"checkbox\";\n      checkbox.id = todo + \"_id_\" + todos.length;\n      let label = document.createElement(\"label\");\n      label.htmlFor = todo + \"_id_\" + todos.length;\n      todoItem.onclick = e => {\n        xorClick(e, todo, label);\n      };\n      label.innerHTML = todo;\n      todoItem.appendChild(checkbox);\n      todoItem.appendChild(label);\n      parentNode.appendChild(todoItem);\n    }\n  }\n  /**\n   * To handle click and double click confusions\n   * Reference : https://stackoverflow.com/a/11057483\n   */\n  function xorClick(e, todo, label) {\n    // kill any pending single clicks\n    if (pendingClick) {\n      clearTimeout(pendingClick);\n      pendingClick = 0;\n    }\n\n    switch (e.detail) {\n      case 1:\n        pendingClick = setTimeout(function() {\n          //console.log(\"single click action here\");\n        }, 500); // should match OS multi-click speed\n        break;\n      case 2:\n        //console.log(\"double click action here\");\n        todoEdit(todo, todos.length - 1, label);\n        break;\n      default:\n        break;\n    }\n  }\n  let pendingClick = 0;\n  let todos = [];\n  let app = document.getElementById(\"app\");\n  let todoList = document.createElement(\"ul\");\n  let input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"text\");\n  input.placeholder = \"Enter a todo...\";\n  input.onchange = inputChangeListener;\n  app.appendChild(input);\n  app.appendChild(todoList);\n});\n"]}